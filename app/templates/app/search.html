{% extends 'base.html' %}
{% block title %}  BLOG | Search {% endblock title %}
{% block content %}
    <main>
        <div class="container">
            <div class="page-top">
                <div class="top flex">
                    <div class="page-name">
                        <a href="{% url 'index' %}" class="learn">
                            <span class="material-icons"> keyboard_return </span> Go back
                        </a>
                        <h1>Search</h1>
                    </div>
                    <form class="search-bar s-active" method="GET">
                        <input type="text" placeholder="Search" name="q" value="{{search_query}}"/>
                        <button type="submit" class="animated-search">
                            <i class="uil uil-search"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </main>
    {% if search_query and posts %}
        <section class="sp">
            <div class="container">
                <div class="grid">
                    {% for post in posts %}
                        <!-- card -->
                        <a href="{% url 'post_page' post.slug %}">
                            <div class="card">
                                <div class="post-img">
                                    <img src="{{ post.image.url }}" alt="" />
                                    <div class="tag">{{ post.tags.all.0.name }}</div>
                                </div>
                                <div class="card-content">
                                    <h3>{{ post.title | title }}</h3>
                                    <div class="author">
                                        <div class="profile-pic">
                                            <img src="{{ post.author.profile.profile_image.url }}" alt="" />
                                        </div>
                                        <div class="details">
                                            {% if post.author.profile.user.first_name and post.author.profile.user.last_name %}
                                                <p>
                                                    {{ post.author.profile.user.first_name | title }} {{ post.author.profile.user.last_name | title }}
                                                </p>
                                            {% else %}
                                                <p>{{ post.author.profile.user.username }}</p>
                                            {% endif %}
                                            <small>{{ post.last_updated | date }}</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </a>
                        <!-- card end-->
                    {% endfor %}
                </div>
            </div>
        </section>
    {% endif %}
{% endblock content %}